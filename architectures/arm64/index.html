<!DOCTYPE html>
<html class="no-js" lang="en" data-content_root="../../">
<head>
    <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>ARM64 &mdash; Gupje  documentation</title>
    
    <link rel="stylesheet" type="text/css" href="../../_static/dist/fontawesome.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/dist/theme.css?v=310cf088" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/drawio.css" />
            <link rel="index" title="Index" href="../../genindex.html" />
            <link rel="search" title="Search" href="../../search.html" />
            <link rel="top" title="Gupje  documentation" href="#" />
            <link rel="next" title="ARM" href="../arm/index.html" />
            <link rel="prev" title="Samsung S7" href="../../targets/samsung_s7.html" />
    </head>
<body>
    <script type="text/javascript" src="../../_static/dist/blocking.js"></script>
    <header class="container-fluid bg-primary">
        <a class="btn btn-sm btn-light skip-to-content-link" href="#main">Skip to content</a>
        <div class="container-fluid">
            <div class="navbar navbar-expand-lg navbar-dark font-weight-bold">
                    <a href="/"
                        title="Gupje"
                        class="logo navbar-brand"
                    >
                        <img src="../../_static/img/wagtail-logo-circle.svg" width="45" height="59" alt="Gupje"
                            class="logo-img"
                        />
                        Gupje
                    </a>
                
                
                <button class="navbar-toggler btn btn-primary d-lg-none" type="button" data-toggle="collapse" data-target="#collapseSidebar" aria-expanded="false" aria-controls="collapseExample">
                    <span class="navbar-toggler-icon"></span>
                    <span class="sr-only">menu</span>
                </button>
            </div>
        </div>
    </header>
    <div class="container-fluid">
        <div class="row">
            <aside class="col-12 col-lg-3 sidebar-container">
                <div id="collapseSidebar" class="collapse sticky-top d-lg-block pt-5 pr-lg-4">
<div id="searchbox" class="searchbox mb-6 px-1" role="search">
    <form id="search-form" action="../../search.html" autocomplete="off" method="get" role="search">
        <div class="input-group">
            <div class="input-group-prepend">
                <div class="input-group-text border-right-0 bg-white py-3 pl-3 pr-2"><span class="fas fa-search"></span></div>
            </div>
            <input class="form-control py-3 pr-3 pl-1 h-100 border-left-0" type="search" name="q" placeholder="Search documentation" aria-label="Search documentation" id="searchinput" />
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div><div class="site-toc">
    <nav class="toc mt-3" aria-label="Main menu">
        <p class="caption" role="heading"><span class="caption-text">Setup:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Gupje overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Example Targets:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../targets/rpi4.html">Raspberry Pi 4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../targets/nvidia_shield.html">Nvidia Shield Tablet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../targets/samsung_s7.html">Samsung S7</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Architectures:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">ARM64</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arm/index.html">ARM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../arm_thumb/index.html">ARM Thumb Mode</a></li>
</ul>

    </nav>
    <template data-toggle-item-template>
        <button class="btn btn-sm btn-link toctree-expand" type="button">
            <span class="sr-only">Toggle menu contents</span>
        </button>
    </template>
</div>
                    <div class="d-lg-none border-bottom">
                        
                    </div>
                </div>
            </aside>
            <div class="col-12 col-lg-9 pt-5">
                <header class="row align-items-baseline">
                    <div class="col">
                        <nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0 p-0 bg-transparent">
        <li class="breadcrumb-item"><a href="../../index.html">Docs</a></li>
        <li class="breadcrumb-item active" aria-current="page">ARM64</li>
    </ol>
</nav>
                    </div>
                    <div class="col-sm-12 col-lg-auto mt-3 mt-lg-3">
                        <noscript>
                            <p>JavaScript is required to toggle light/dark mode..</p>
                        </noscript>
                        <button id="wagtail-theme" class="btn btn-sm btn-light text-decoration-none" type="button">
                            <span class="dark-only"><i class="fas fa-sun"></i> Light mode</span>
                            <span class="light-only"><i class="fas fa-moon"></i> Dark mode</span>
                        </button>
    <a class="btn btn-sm btn-light text-decoration-none" href="https://github.com/wagtail/sphinx_wagtail_theme/blob/main/docs/architectures/arm64/index.rst" rel="nofollow">
        <span class="btn-icon"><span class="fab fa-github"></span></span>
        <span class="btn-text">Edit on GitHub</span>
    </a>
    <a class="btn btn-sm btn-light text-decoration-none" href="../../_sources/architectures/arm64/index.rst.txt" rel="nofollow">
        <span class="btn-icon"><span class="fas fa-code"></span></span>
        <span class="btn-text">View source</span>
    </a>
                        
                    </div>
                </header>
                <div class="row" >
                    <div class="col-12">
                        <hr class="w-100 my-4">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-9 order-last order-lg-first rst-content">
                        <main role="main" id="main">
    <section id="arm64">
<h1>ARM64<a class="headerlink" href="#arm64" title="Link to this heading">¶</a></h1>
<p>Documentation for the ARM64 architecture.</p>
<section id="vector-tables-in-arm64">
<h2>Vector Tables in ARM64<a class="headerlink" href="#vector-tables-in-arm64" title="Link to this heading">¶</a></h2>
<p>A lot of this documentation can also be found in the <a class="reference external" href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;ved=2ahUKEwitkfqjqNz5AhUJHuwKHZ3vAj4QFnoECBMQAQ&amp;url=https%3A%2F%2Fdocumentation-service.arm.com%2Fstatic%2F5f8ea482f86e16515cdbe3c6%3Ftoken%3D&amp;usg=AOvVaw3QI7Lwrcg6B3BmQ5syZV70">ARM SMC calling convention documentation</a></p>
<section id="vector-exception-levels">
<h3>Vector Exception Levels<a class="headerlink" href="#vector-exception-levels" title="Link to this heading">¶</a></h3>
<p>In ARM64 each there is a Vector table for each Exception level, except for EL0. So, in practice there is a Vector table for:</p>
<blockquote>
<div><ul class="simple">
<li><p>EL3 <code class="docutils literal notranslate"><span class="pre">Secure</span> <span class="pre">Monitor</span> <span class="pre">Call</span> <span class="pre">(SMC)</span></code></p></li>
<li><p>EL2 <code class="docutils literal notranslate"><span class="pre">Hyper</span> <span class="pre">Visor</span> <span class="pre">Call</span> <span class="pre">(HVC)</span></code></p></li>
<li><p>EL1 <code class="docutils literal notranslate"><span class="pre">Super</span> <span class="pre">Visor</span> <span class="pre">Call</span> <span class="pre">(SVC)</span></code></p></li>
</ul>
</div></blockquote>
<p>Documentation about this can be found in <a class="reference external" href="https://developer.arm.com/documentation/100933/0100/AArch64-exception-vector-table">the ARM documentation</a></p>
<img alt="../../_images/vector_table_arm64.png" src="../../_images/vector_table_arm64.png" />
<p>This vector table can be allocated and filled for each of the vector tables described above.</p>
</section>
<section id="setting-the-vector-base-address">
<h3>Setting the Vector Base Address<a class="headerlink" href="#setting-the-vector-base-address" title="Link to this heading">¶</a></h3>
<p>To set the location of this vector table a call <code class="docutils literal notranslate"><span class="pre">MSR</span></code> call can be done to <code class="docutils literal notranslate"><span class="pre">VBAR_ELX</span></code> which will write an address to that register. When an execption call is executed, this address is fetched and execution will move to that page, with the corresponding Execption Level(EL)</p>
</section>
<section id="arm-smc-calling-convention">
<h3>ARM SMC Calling Convention<a class="headerlink" href="#arm-smc-calling-convention" title="Link to this heading">¶</a></h3>
<p>When doing an SMC call in arm64 a synchronous exception is generated that is handled by the secure monitor in EL3.
The SMC call can be in both 32 and 64 bit mode, depending on various bits in the instruction.
For most phones this will be in 64 bit mode.</p>
<p>When doing a SMC call, the register <code class="docutils literal notranslate"><span class="pre">ELR_ELn</span></code> is updated to show the location of where the call came from.
This is the address after the call where the exception came from. When doing an <code class="docutils literal notranslate"><span class="pre">ERET</span></code> instruction this value is written to the <code class="docutils literal notranslate"><span class="pre">PC</span></code>.</p>
<section id="stack-pointers">
<h4>Stack Pointers<a class="headerlink" href="#stack-pointers" title="Link to this heading">¶</a></h4>
<p>Each Exception Level has its own stack pointers. The registers for these are:</p>
<ul class="simple">
<li><p>SP_EL0</p></li>
<li><p>SP_EL1</p></li>
<li><p>SP_EL2</p></li>
<li><p>SP_EL3</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">SP_EL3</span></code> is innacessible in EL3, to read it you need to read the <code class="docutils literal notranslate"><span class="pre">SP</span></code>.</p>
</section>
</section>
</section>
<section id="debugger-vbar-implementation">
<h2>Debugger VBAR Implementation<a class="headerlink" href="#debugger-vbar-implementation" title="Link to this heading">¶</a></h2>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Docs are incomplete!</p>
</div>
<p>The debugger uses a SMC call to insert a breakpoint at any address. When a SMC call is thrown the processor jumps to the address pointed to in the <code class="docutils literal notranslate"><span class="pre">VBAR_EL3</span></code> register.
This register <strong>has to</strong> point to the debugger.
The debugger will first store all the registers in the storage location, overwrite the stack pointer and send the hello message <code class="docutils literal notranslate"><span class="pre">b'GiAs'</span></code> to the host.</p>
<p>An overview of what is happening when a SMC call is dan can be seen below:</p>
<img alt="../../_images/smc_handling_arm64.jpg" src="../../_images/smc_handling_arm64.jpg" />
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Currently register X15 gets corrupted when an SMC call is handled.</p>
</div>
</section>
<section id="memory-managment-unit-on-arm64">
<h2>Memory Managment Unit on ARM64<a class="headerlink" href="#memory-managment-unit-on-arm64" title="Link to this heading">¶</a></h2>
<p>This part describes the memory managment unit on ARM64 and how it is used by the debugger.</p>
<section id="single-level-pagetable-at-el3">
<h3>Single Level Pagetable at EL3<a class="headerlink" href="#single-level-pagetable-at-el3" title="Link to this heading">¶</a></h3>
<p>The documentation described here can also be found at the <a class="reference external" href="https://developer.arm.com/documentation/102416/0100/Single-level-table-at-EL3">official ARM documentation</a>.</p>
<section id="translation-regime">
<h4>Translation Regime<a class="headerlink" href="#translation-regime" title="Link to this heading">¶</a></h4>
<p>Register <code class="docutils literal notranslate"><span class="pre">TCR_ELx</span></code> is used to control the <strong>Tranlation Regime</strong> for the pagetables. The documentation for the <code class="docutils literal notranslate"><span class="pre">TCR_EL3</span></code> can be found in the <a class="reference external" href="https://developer.arm.com/documentation/ddi0500/d/system-control/aarch64-register-descriptions/translation-control-register--el3">official ARM documentation</a>.</p>
</section>
<section id="translation-table">
<h4>Translation Table<a class="headerlink" href="#translation-table" title="Link to this heading">¶</a></h4>
<p>The location of the page table is located in register <code class="docutils literal notranslate"><span class="pre">ttbr0_el3</span></code>. Depending of the configuration of <code class="docutils literal notranslate"><span class="pre">TCR_EL3</span></code> the bits for address selection can change.</p>
<p>More documentation can be found <a class="reference external" href="https://developer.arm.com/documentation/ddi0595/2021-06/AArch64-Registers/TTBR0-EL3--Translation-Table-Base-Register-0--EL3-">here</a></p>
</section>
<section id="pagetable-entry">
<h4>Pagetable Entry<a class="headerlink" href="#pagetable-entry" title="Link to this heading">¶</a></h4>
<p>The following diagram shows the format of a stage 1 level 1 table entry on EL3.</p>
<img alt="../../_images/singlelevel_el3_pte.png" src="../../_images/singlelevel_el3_pte.png" />
</section>
</section>
<section id="automatic-paging">
<h3>Automatic Paging<a class="headerlink" href="#automatic-paging" title="Link to this heading">¶</a></h3>
<p>Automatic paging for page walking will be setup in the debugger.
For this the <code class="docutils literal notranslate"><span class="pre">ARM64_Concrete_State</span></code> contains a mmu with class <code class="docutils literal notranslate"><span class="pre">ARM64_MMU</span></code>.</p>
</section>
</section>
<section id="system-configuration">
<h2>System Configuration<a class="headerlink" href="#system-configuration" title="Link to this heading">¶</a></h2>
<p>Configuration for the processor can be set in the System Control Register for different exception levels. These registers are:</p>
<blockquote>
<div><ul class="simple">
<li><p>SCTLR_EL3</p></li>
<li><p>SCTLR_EL2</p></li>
<li><p>SCTLR_EL1</p></li>
</ul>
</div></blockquote>
<p>More information about the configuration settings can be found in the <a class="reference external" href="https://developer.arm.com/documentation/ddi0601/2020-12/AArch64-Registers/SCTLR-EL3--System-Control-Register--EL3-">ARM documentation</a></p>
</section>
<section id="debugger-storage-overview-on-arm64">
<h2>Debugger Storage Overview on ARM64<a class="headerlink" href="#debugger-storage-overview-on-arm64" title="Link to this heading">¶</a></h2>
<p>Overview of the storage setup on ARM64 for the debugger. To interact with this storage dump you can either dump the storage location and parse the entries or use the <em>utils/debugger/debugger_archs/arm64_processor_state.py</em> processor state, which is also passed as an argument in <strong>GA_arm64_debugger</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All addresses below asume <code class="docutils literal notranslate"><span class="pre">STORAGE_LOCATION</span></code> + <strong>Address</strong></p>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Address</p></th>
<th class="head"><p>Function</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0x0</p></td>
<td><p>X0</p></td>
<td><p>Stores Register X0</p></td>
</tr>
<tr class="row-odd"><td><p>0x8</p></td>
<td><p>X1</p></td>
<td><p>Stores Register X1</p></td>
</tr>
<tr class="row-even"><td><p>0x10</p></td>
<td><p>X2</p></td>
<td><p>Stores Register X2</p></td>
</tr>
<tr class="row-odd"><td><p>0x18</p></td>
<td><p>X3</p></td>
<td><p>Stores Register X3</p></td>
</tr>
<tr class="row-even"><td><p>0x20</p></td>
<td><p>X4</p></td>
<td><p>Stores Register X4</p></td>
</tr>
<tr class="row-odd"><td><p>0x28</p></td>
<td><p>X5</p></td>
<td><p>Stores Register X5</p></td>
</tr>
<tr class="row-even"><td><p>0x30</p></td>
<td><p>X6</p></td>
<td><p>Stores Register X6</p></td>
</tr>
<tr class="row-odd"><td><p>0x38</p></td>
<td><p>X7</p></td>
<td><p>Stores Register X7</p></td>
</tr>
<tr class="row-even"><td><p>0x40</p></td>
<td><p>X8</p></td>
<td><p>Stores Register X8</p></td>
</tr>
<tr class="row-odd"><td><p>0x48</p></td>
<td><p>X9</p></td>
<td><p>Stores Register X9</p></td>
</tr>
<tr class="row-even"><td><p>0x50</p></td>
<td><p>X10</p></td>
<td><p>Stores Register X10</p></td>
</tr>
<tr class="row-odd"><td><p>0x58</p></td>
<td><p>X11</p></td>
<td><p>Stores Register X11</p></td>
</tr>
<tr class="row-even"><td><p>0x60</p></td>
<td><p>X12</p></td>
<td><p>Stores Register X12</p></td>
</tr>
<tr class="row-odd"><td><p>0x68</p></td>
<td><p>X13</p></td>
<td><p>Stores Register X13</p></td>
</tr>
<tr class="row-even"><td><p>0x70</p></td>
<td><p>X14</p></td>
<td><p>Stores Register X14</p></td>
</tr>
<tr class="row-odd"><td><p>0x78</p></td>
<td><p>X15</p></td>
<td><p>Stores Register X15</p></td>
</tr>
<tr class="row-even"><td><p>0x80</p></td>
<td><p>X16</p></td>
<td><p>Stores Register X16</p></td>
</tr>
<tr class="row-odd"><td><p>0x88</p></td>
<td><p>X17</p></td>
<td><p>Stores Register X17</p></td>
</tr>
<tr class="row-even"><td><p>0x90</p></td>
<td><p>X18</p></td>
<td><p>Stores Register X18</p></td>
</tr>
<tr class="row-odd"><td><p>0x98</p></td>
<td><p>X19</p></td>
<td><p>Stores Register X19</p></td>
</tr>
<tr class="row-even"><td><p>0xa0</p></td>
<td><p>X20</p></td>
<td><p>Stores Register X20</p></td>
</tr>
<tr class="row-odd"><td><p>0xa8</p></td>
<td><p>X21</p></td>
<td><p>Stores Register X21</p></td>
</tr>
<tr class="row-even"><td><p>0xb0</p></td>
<td><p>X22</p></td>
<td><p>Stores Register X22</p></td>
</tr>
<tr class="row-odd"><td><p>0xb8</p></td>
<td><p>X23</p></td>
<td><p>Stores Register X23</p></td>
</tr>
<tr class="row-even"><td><p>0xc0</p></td>
<td><p>X24</p></td>
<td><p>Stores Register X24</p></td>
</tr>
<tr class="row-odd"><td><p>0xc8</p></td>
<td><p>X25</p></td>
<td><p>Stores Register X25</p></td>
</tr>
<tr class="row-even"><td><p>0xd0</p></td>
<td><p>X26</p></td>
<td><p>Stores Register X26</p></td>
</tr>
<tr class="row-odd"><td><p>0xd8</p></td>
<td><p>X27</p></td>
<td><p>Stores Register X27</p></td>
</tr>
<tr class="row-even"><td><p>0xe0</p></td>
<td><p>X28</p></td>
<td><p>Stores Register X28</p></td>
</tr>
<tr class="row-odd"><td><p>0xe8</p></td>
<td><p>X29</p></td>
<td><p>Stores the <code class="docutils literal notranslate"><span class="pre">Frame</span> <span class="pre">Pointer</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0xf0</p></td>
<td><p>X30</p></td>
<td><p>Stores the <code class="docutils literal notranslate"><span class="pre">Link</span> <span class="pre">Register</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0xf8</p></td>
<td><p>SP</p></td>
<td><p>Stores the <code class="docutils literal notranslate"><span class="pre">Stack</span> <span class="pre">Pointer</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0x100</p></td>
<td><p>TTBR0_EL3</p></td>
<td><p>Stores <code class="docutils literal notranslate"><span class="pre">TTBR0_EL3</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x108</p></td>
<td><p>TTBR0_EL2</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0x110</p></td>
<td><p>TTBR0_EL1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x118</p></td>
<td><p>SCTLR_EL3</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0x120</p></td>
<td><p>SCTLR_EL2</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x128</p></td>
<td><p>SCTLR_EL1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0x130</p></td>
<td><p>VBAR_EL3</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x130</p></td>
<td><p>VBAR_EL2</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0x140</p></td>
<td><p>VBAR_EL1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x148</p></td>
<td><p>TCR_EL3</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0x150</p></td>
<td><p>TCR_EL2</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x158</p></td>
<td><p>TCR_EL1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0x160</p></td>
<td><p>ELR_EL3</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x168</p></td>
<td><p>ELR_EL2</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0x170</p></td>
<td><p>ELR_EL1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x178</p></td>
<td><p>SP_EL2</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0x180</p></td>
<td><p>SP_EL1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x188</p></td>
<td><p>SP_EL0</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0x190</p></td>
<td><p>SPSR_EL3</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x198</p></td>
<td><p>SPSR_EL2</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0x1a0</p></td>
<td><p>SPSR_EL1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x1a8</p></td>
<td><p>MAIR_EL3</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0x1b0</p></td>
<td><p>MAIR_EL2</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x1b8</p></td>
<td><p>MAIR_EL1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>0x1c0</p></td>
<td><p>CurrentEL</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0x1c8</p></td>
<td><p>NZCV</p></td>
<td><p>Store processor condition flags</p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>0xfc0</p></td>
<td><p>DBG_SETUP_JUMP</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DEBUGGER</span></code> Set to 0x77 to jump to <code class="docutils literal notranslate"><span class="pre">DBG_SETUP_JUMP_ADDRESS</span></code> and when DEVICE_SETUP=1</p></td>
</tr>
<tr class="row-even"><td><p>0xfc8</p></td>
<td><p>DBG_SETUP_JUMP_ADDRESS</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DEBUGGER</span></code> Address to jump to when <code class="docutils literal notranslate"><span class="pre">DBG_SETUP_JUMP</span></code> is set to <em>0x77</em></p></td>
</tr>
<tr class="row-odd"><td><p>0xfd0</p></td>
<td><p>DBG_MMU_DISABLE</p></td>
<td><p><strong>DISABLED</strong> <code class="docutils literal notranslate"><span class="pre">DEBUGGER</span></code> Disable the MMU on entry and enable the MMU on leave</p></td>
</tr>
<tr class="row-even"><td><p>0xfd8</p></td>
<td><p>DBG_JUMP_TO</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DEBUGGER</span></code> Address to jump to instead of the debugger</p></td>
</tr>
<tr class="row-odd"><td><p>0xfe0</p></td>
<td><p>DBG_CONT_EXEC</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DEBUGGER</span></code> Do not jump in debugger but into</p></td>
</tr>
<tr class="row-even"><td><p>0xfe8</p></td>
<td><p>TEMP X0</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DEBUGGER</span></code> Temporary storage for X0 value</p></td>
</tr>
<tr class="row-odd"><td><p>0xff0</p></td>
<td><p>Store X0</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DEBUGGER</span></code> Stores exception id for the <code class="docutils literal notranslate"><span class="pre">SMC</span></code> call</p></td>
</tr>
<tr class="row-even"><td><p>0xff8</p></td>
<td><p>JUMP_ADDR</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DEBUGGER</span></code> Memory location that instructs the debugger where to jump to</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This memory segment is still being updated to add registers</p>
</div>
<p>When <code class="docutils literal notranslate"><span class="pre">DBG_CONT_EXEC</span></code> is set to <strong>0x777</strong> the debugger will not enter the debugger_main address, but instead restore the original processor state and jump into <code class="docutils literal notranslate"><span class="pre">DBG_JUMP_TO</span></code>. This allows the debugger to be run without user interaction.</p>
</section>
</section>

</main>
                        <nav aria-label="Page navigation" class="py-4 my-5 clearfix font-weight-bold border-top">
    <a class="float-left" href="../../targets/samsung_s7.html" title="Previous">
        <span aria-hidden="true">←&nbsp;</span>Samsung S7
    </a>
    <a class="float-right" href="../arm/index.html" title="Next">
        ARM <span aria-hidden="true">&nbsp;→</span>
    </a>
</nav>
                    </div>
                    
                    <nav class="col-12 col-lg-3 pb-4">
                        <div class="sticky-top toc page-toc" aria-labelledby="page-toc-heading">
                            <p class="font-weight-bold" id="page-toc-heading">Page contents</p>
                            <ul>
<li><a class="reference internal" href="#">ARM64</a><ul>
<li><a class="reference internal" href="#vector-tables-in-arm64">Vector Tables in ARM64</a><ul>
<li><a class="reference internal" href="#vector-exception-levels">Vector Exception Levels</a></li>
<li><a class="reference internal" href="#setting-the-vector-base-address">Setting the Vector Base Address</a></li>
<li><a class="reference internal" href="#arm-smc-calling-convention">ARM SMC Calling Convention</a><ul>
<li><a class="reference internal" href="#stack-pointers">Stack Pointers</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#debugger-vbar-implementation">Debugger VBAR Implementation</a></li>
<li><a class="reference internal" href="#memory-managment-unit-on-arm64">Memory Managment Unit on ARM64</a><ul>
<li><a class="reference internal" href="#single-level-pagetable-at-el3">Single Level Pagetable at EL3</a><ul>
<li><a class="reference internal" href="#translation-regime">Translation Regime</a></li>
<li><a class="reference internal" href="#translation-table">Translation Table</a></li>
<li><a class="reference internal" href="#pagetable-entry">Pagetable Entry</a></li>
</ul>
</li>
<li><a class="reference internal" href="#automatic-paging">Automatic Paging</a></li>
</ul>
</li>
<li><a class="reference internal" href="#system-configuration">System Configuration</a></li>
<li><a class="reference internal" href="#debugger-storage-overview-on-arm64">Debugger Storage Overview on ARM64</a></li>
</ul>
</li>
</ul>

                        </div>
                    </nav>
                    
                </div>
            </div>
        </div>
    </div>
    <footer class="container-fluid bg-primary text-light">
        <div class="container">
            <div class="row">
        <div class="col p-4">
            
                <nav aria-label="Footer">
                    <ul class="nav justify-content-center mb-2">
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="https://wagtail.org/features/">Features</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="https://wagtail.org/about-wagtail/"> About Wagtail</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="https://wagtail.org/services/"> Services</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="https://wagtail.org/blog/"> Blog</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="https://wagtail.org/packages/"> Packages</a></li>
                        
                            
                            
                            <li class="nav-item"><a class="nav-link text-light"  href="https://wagtail.org/developers/"> Developers</a></li>
                        
                    </ul>
                </nav>
            
            <div class="text-center">
                    &copy; Copyright 2024, Eljakim
            </div>
            <div class="text-center text-white-50 font-italic mt-3">
                <small>
                    Created using
                    <a href="https://github.com/wagtail/sphinx_wagtail_theme" rel="nofollow" target="_blank">
                        Sphinx Wagtail Theme 6.4.0
                    </a>
                    and
                    <a href="https://www.sphinx-doc.org/" rel="nofollow" target="_blank">
                        Sphinx 8.1.3
                    </a>
                </small>
            </div>
        </div>
    </div>
        </div>
    </footer>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=9bcbadda"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=f281be69"></script>
        <script type="text/javascript" src="../../_static/dist/theme.js"></script>
        <script type="text/javascript" src="../../_static/dist/vendor.js"></script>
        <script type="text/javascript" src="../../_static/searchtools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function() { Search.loadIndex("../../searchindex.js"); });
        </script>
        <script type="text/javascript" id="searchindexloader"></script>
    </body>
</html>